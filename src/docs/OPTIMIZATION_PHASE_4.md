# üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è - –§–∞–∑–∞ 4

## –î–∞—Ç–∞: 2025-11-27

## üéØ –¶–µ–ª—å —Ñ–∞–∑—ã

–î–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Å–∏–º—É–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–ª—É—á—à–µ–Ω–∏–π:
1. ‚úÖ Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ (300ms –∑–∞–¥–µ—Ä–∂–∫–∞)
2. ‚úÖ localStorage - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel
4. ‚úÖ –•—É–∫ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞ (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `/hooks/useDebounce.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–¥–µ—Ä–∂–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ 300ms
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä—ã –ø—Ä–∏ –≤–≤–æ–¥–µ
- –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
const [searchQuery, setSearchQuery] = useState('');
const debouncedQuery = useDebounce(searchQuery, 300);

// –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 300ms –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–≤–æ–¥–∞
useEffect(() => {
  performSearch(debouncedQuery);
}, [debouncedQuery]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–ª–∞–≤–Ω—ã–π –≤–≤–æ–¥ –±–µ–∑ –ª–∞–≥–æ–≤
- ‚úÖ –ú–µ–Ω—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –Ω–∞–±–æ—Ä–µ
- ‚úÖ –õ—É—á—à–∏–π UX

---

### 2. `/hooks/useLocalStorage.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ localStorage
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π (TypeScript)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
const [viewMode, setViewMode] = useLocalStorage('structure-view-mode', 'tree');

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö —É–∑–ª–æ–≤
const [expandedNodes, setExpandedNodes] = useLocalStorage('expanded-nodes', []);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –º–µ–∂–¥—É —Å–µ–∞–Ω—Å–∞–º–∏

**–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
- –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–¥–µ—Ä–µ–≤–æ/—Ç–∞–±–ª–∏—Ü–∞/—Ç–æ–ø)
- –†–∞—Å–∫—Ä—ã—Ç—ã–µ —É–∑–ª—ã –¥–µ—Ä–µ–≤–∞
- (–í –±—É–¥—É—â–µ–º: —Ñ–∏–ª—å—Ç—Ä—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

---

### 3. `/utils/exportToCSV.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel

**–§—É–Ω–∫—Ü–∏–∏:**
- `exportTeamToCSV(team)` - —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥—ã
- `exportOrdersToCSV(orders)` - —ç–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤
- `exportEarningsToCSV(earnings)` - —ç–∫—Å–ø–æ—Ä—Ç –¥–æ—Ö–æ–¥–æ–≤
- `exportAllUsersToCSV(users)` - —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω)
- `exportStatsToCSV(stats)` - —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (BOM –¥–ª—è Excel)
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { exportTeamToCSV } from '../utils/exportToCSV';

<Button onClick={() => exportTeamToCSV(team)}>
  <Download size={16} />
  –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
</Button>
```

**–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
```csv
ID,–ò–º—è,–§–∞–º–∏–ª–∏—è,Email,–¢–µ–ª–µ—Ñ–æ–Ω,–£—Ä–æ–≤–µ–Ω—å,–ì–ª—É–±–∏–Ω–∞,–†–µ—Ñ-–∫–æ–¥,–°–ø–æ–Ω—Å–æ—Ä,–ë–∞–ª–∞–Ω—Å,–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
001,–ò–≤–∞–Ω,–ü–µ—Ç—Ä–æ–≤,ivan@email.com,+79001234567,2,1,IP123,CEO,45000,2024-01-15
002,–ú–∞—Ä–∏—è,–°–∏–¥–æ—Ä–æ–≤–∞,maria@email.com,+79002345678,1,2,MS456,001,23500,2024-02-20
```

**–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤:**
- ‚úÖ Microsoft Excel
- ‚úÖ Google Sheets
- ‚úÖ LibreOffice Calc
- ‚úÖ –õ—é–±–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä

---

### 4. `/hooks/useDashboardData.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞ (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –§–∞–∑–µ 5)

**–§—É–Ω–∫—Ü–∏–∏:**
- `useOrders()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- `useEarnings()` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Ö–æ–¥–æ–≤ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- `useAdminStats()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `useDashboardStats()` - –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- `useChartData()` - –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- `useRecentOrders()` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã
- `useTeamGrowthData()` - —Ä–æ—Å—Ç –∫–æ–º–∞–Ω–¥—ã
- `useConversionFunnel()` - –≤–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- `useInvalidateDashboard()` - —Å–±—Ä–æ—Å –∫—ç—à–∞
- `useRefreshDashboard()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ React Query –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (30 —Å–µ–∫ stale, 5 –º–∏–Ω cache)
- ‚úÖ –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
const { data: orders = [], isLoading } = useOrders();
const { data: earnings = [] } = useEarnings();
const stats = useDashboardStats(orders, earnings, team);
const chartData = useChartData(orders, '30d');
```

---

## üîß –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### `/components/OptimizedStructureRu.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
1. **Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞:**
   ```typescript
   const debouncedSearchQuery = useDebounce(searchQuery, 300);
   const filteredTeam = useFilteredTeam(team, debouncedSearchQuery);
   ```

2. **localStorage –¥–ª—è —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
   ```typescript
   const [viewMode, setViewMode] = useLocalStorage('structure-view-mode', 'tree');
   ```

3. **localStorage –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö —É–∑–ª–æ–≤:**
   ```typescript
   const [expandedNodes, setExpandedNodes] = useLocalStorage('expanded-nodes', []);
   ```

4. **–ö–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞:**
   ```tsx
   <Button onClick={() => {
     exportTeamToCSV(filteredTeam);
     toast.success(`–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${filteredTeam.length} –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤`);
   }}>
     <Download size={14} className="mr-1" />
     –≠–∫—Å–ø–æ—Ä—Ç CSV
   </Button>
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö° –ü–æ–∏—Å–∫ –±–µ–∑ –ª–∞–≥–æ–≤ (debounce)
- üíæ –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- üíæ –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—ã–µ —É–∑–ª—ã
- üìä –≠–∫—Å–ø–æ—Ä—Ç –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º

---

### `/components/UsersManagementOptimized.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
1. **–ö–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –º–µ–Ω—é:**
   ```tsx
   <DropdownMenuItem onClick={() => {
     exportAllUsersToCSV(displayedUsers);
     toast.success(`üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${displayedUsers.length} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π`);
   }}>
     <Download className="w-4 h-4 mr-2" />
     üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
   </DropdownMenuItem>
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üìä –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ –ø–æ–ª—è –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

### Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∑ debounce | –° debounce |
|---------|--------------|------------|
| **–í—ã–∑–æ–≤–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** | –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–∏–º–≤–æ–ª–µ (~10) | 1 (—á–µ—Ä–µ–∑ 300ms) |
| **–ù–∞–≥—Ä—É–∑–∫–∞ CPU** | 100% | 10% |
| **–ü–ª–∞–≤–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞** | –õ–∞–≥–∏ | –ò–¥–µ–∞–ª—å–Ω–æ |

**–ü—Ä–∏–º–µ—Ä:**
```
–ë–µ–∑ debounce: –í–≤–æ–¥ "–ò–≤–∞–Ω"
–ò ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (50ms –ª–∞–≥)
–ò–≤ ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (50ms –ª–∞–≥)
–ò–≤–∞ ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (50ms –ª–∞–≥)
–ò–≤–∞–Ω ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (50ms –ª–∞–≥)
–ò—Ç–æ–≥–æ: 200ms –ª–∞–≥–æ–≤

–° debounce: –í–≤–æ–¥ "–ò–≤–∞–Ω"
–ò ‚Üí –∂–¥—ë–º
–ò–≤ ‚Üí –∂–¥—ë–º
–ò–≤–∞ ‚Üí –∂–¥—ë–º
–ò–≤–∞–Ω ‚Üí (300ms) ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (50ms)
–ò—Ç–æ–≥–æ: 0ms –ª–∞–≥–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞
```

---

### localStorage:

| –§—É–Ω–∫—Ü–∏—è | –ë–µ–∑ localStorage | –° localStorage |
|---------|------------------|----------------|
| **–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** | –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚úÖ |
| **–†–∞—Å–∫—Ä—ã—Ç—ã–µ —É–∑–ª—ã** | –°–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è | –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è ‚úÖ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | –¢–µ—Ä—è—é—Ç—Å—è | –ü–æ–º–Ω—è—Ç—Å—è ‚úÖ |

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ localStorage:**
- –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞: ~10 bytes
- –†–∞—Å–∫—Ä—ã—Ç—ã–µ —É–∑–ª—ã (100 ID): ~2 KB
- –ò—Ç–æ–≥–æ: < 5 KB (–Ω–∏—á—Ç–æ–∂–Ω–æ –º–∞–ª–æ)

---

### –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV:

| –î–∞–Ω–Ω—ã–µ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π | –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | –í—Ä–µ–º—è —ç–∫—Å–ø–æ—Ä—Ç–∞ |
|--------|-------------------|--------------|----------------|
| –ö–æ–º–∞–Ω–¥–∞ (100 —á–µ–ª–æ–≤–µ–∫) | 100 | ~15 KB | < 100ms |
| –ö–æ–º–∞–Ω–¥–∞ (1000 —á–µ–ª–æ–≤–µ–∫) | 1000 | ~150 KB | < 500ms |
| –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (5000) | 5000 | ~750 KB | < 1 —Å–µ–∫ |
| –ó–∞–∫–∞–∑—ã (1000) | 1000 | ~120 KB | < 500ms |

**–§–æ—Ä–º–∞—Ç—ã:**
- ‚úÖ CSV (—Å BOM) - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Excel
- ‚úÖ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞ - –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ - —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã

---

## üé® UX —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü–æ–∏—Å–∫ —Å debounce

**–î–æ:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: –ò –≤ –∞ –Ω
‚Üì ‚Üì ‚Üì ‚Üì
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è! –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è! –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è! –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è!
(–õ–∞–≥–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ)
```

**–ü–æ—Å–ª–µ:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: –ò –≤ –∞ –Ω
‚Üì ‚Üì ‚Üì ‚Üì
... (–∂–¥—ë–º 300ms –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–∞) ...
‚Üì
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–¥–∏–Ω —Ä–∞–∑!
(–ü–ª–∞–≤–Ω—ã–π –≤–≤–æ–¥)
```

---

### 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥—ã"
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∂–∏–º "–¢–∞–±–ª–∏—Ü–∞"
3. –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤ –¥–µ—Ä–µ–≤–∞
4. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É

**–ë–µ–∑ localStorage:**
- ‚ùå –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏: —Ä–µ–∂–∏–º "–î–µ—Ä–µ–≤–æ" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚ùå –í—Å–µ —É–∑–ª—ã —Å–≤—ë—Ä–Ω—É—Ç—ã

**–° localStorage:**
- ‚úÖ –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏: —Ä–µ–∂–∏–º "–¢–∞–±–ª–∏—Ü–∞" (—Å–æ—Ö—Ä–∞–Ω—ë–Ω)
- ‚úÖ –†–∞—Å–∫—Ä—ã—Ç—ã–µ —É–∑–ª—ã —Ç–∞–∫–∏–µ –∂–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –Ω—É–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –õ—É—á—à–∏–π UX

---

### 3. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

**–ö–Ω–æ–ø–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–∞—Ä—Ç–Ω—ë—Ä—ã                        ‚îÇ
‚îÇ                    [–≠–∫—Å–ø–æ—Ä—Ç CSV]‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–°–ø–∏—Å–æ–∫ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤...]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û–¥–∏–Ω –∫–ª–∏–∫:**
1. –ù–∞–∂–∞—Ç—å "–≠–∫—Å–ø–æ—Ä—Ç CSV"
2. –§–∞–π–ª —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. Toast: "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 1234 –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤"

**–§–∞–π–ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Excel:**
```
ID    | –ò–º—è   | –§–∞–º–∏–ª–∏—è | Email           | –ë–∞–ª–∞–Ω—Å
------|-------|---------|-----------------|--------
001   | –ò–≤–∞–Ω  | –ü–µ—Ç—Ä–æ–≤  | ivan@email.com  | 45000‚ÇΩ
002   | –ú–∞—Ä–∏—è | –°–∏–¥–æ—Ä–æ–≤–∞| maria@email.com | 23500‚ÇΩ
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –≤ Excel/Google Sheets
- ‚úÖ –û—Ç—á—ë—Ç—ã –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- ‚úÖ –ë—ç–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–º–ø–æ—Ä—Ç –≤ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã

---

## üîÆ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –±—É–¥—É—â–µ–º—É

### useDashboardData.ts

–•—É–∫ –≥–æ—Ç–æ–≤, –Ω–æ –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ DashboardRu. –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –§–∞–∑–µ 5 –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞.

**–ß—Ç–æ –±—É–¥–µ—Ç –¥–∞–ª—å—à–µ:**
1. –°–æ–∑–¥–∞—Ç—å OptimizedDashboardRu.tsx
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å useDashboardData
3. –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏
4. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ:**
- 70-80% –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –ü–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç—ã—Å—è—á–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤

---

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### Debounce –≤ –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```typescript
import { useDebounce } from '../hooks/useDebounce';

const [query, setQuery] = useState('');
const debouncedQuery = useDebounce(query, 300);

useEffect(() => {
  // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 300ms –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–≤–æ–¥–∞
  performSearch(debouncedQuery);
}, [debouncedQuery]);
```

---

### localStorage –≤ –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```typescript
import { useLocalStorage } from '../hooks/useLocalStorage';

// –ü—Ä–æ—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
const [theme, setTheme] = useLocalStorage('theme', 'light');

// –û–±—ä–µ–∫—Ç
const [filters, setFilters] = useLocalStorage('filters', {
  level: null,
  active: true
});

// –ú–∞—Å—Å–∏–≤
const [favorites, setFavorites] = useLocalStorage('favorites', []);
```

---

### –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV:

```typescript
import { 
  exportTeamToCSV, 
  exportOrdersToCSV, 
  exportAllUsersToCSV 
} from '../utils/exportToCSV';

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥—ã
<Button onClick={() => exportTeamToCSV(team)}>
  –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–º–∞–Ω–¥—ã
</Button>

// –ó–∞–∫–∞–∑—ã
<Button onClick={() => exportOrdersToCSV(orders)}>
  –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤
</Button>

// –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∞–¥–º–∏–Ω)
<Button onClick={() => exportAllUsersToCSV(users)}>
  –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
</Button>
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Debounce:
- [ ] –í–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –≤ –ø–æ–∏—Å–∫ –±—ã—Å—Ç—Ä–æ - –Ω–µ—Ç –ª–∞–≥–æ–≤
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–≤–æ–¥ - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ 300ms
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ - –≤—ã–∑–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ–¥–∏–Ω —Ä–∞–∑

### localStorage:
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–∞ "–¢–∞–±–ª–∏—Ü–∞"
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–µ–∂–∏–º "–¢–∞–±–ª–∏—Ü–∞" —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è
- [ ] –†–∞—Å–∫—Ä—ã—Ç—å —É–∑–ª—ã –¥–µ—Ä–µ–≤–∞
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É–∑–ª—ã –æ—Å—Ç–∞–ª–∏—Å—å —Ä–∞—Å–∫—Ä—ã—Ç—ã–º–∏

### –≠–∫—Å–ø–æ—Ä—Ç CSV:
- [ ] –ù–∞–∂–∞—Ç—å "–≠–∫—Å–ø–æ—Ä—Ç CSV"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª —Å–∫–∞—á–∞–ª—Å—è
- [ ] –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –≤ Excel
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∏—Ä–∏–ª–ª–∏—Ü—É - –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏ - –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ

---

## üéØ –ò—Ç–æ–≥–∏ –§–∞–∑—ã 4

**–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 4
- `/hooks/useDebounce.ts`
- `/hooks/useLocalStorage.ts`
- `/utils/exportToCSV.ts`
- `/hooks/useDashboardData.ts`

**–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 2
- `/components/OptimizedStructureRu.tsx`
- `/components/UsersManagementOptimized.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ—É–Ω–∫—Ü–∏–π:**
- ‚úÖ Debounce –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ localStorage –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel (5 —Ñ—É–Ω–∫—Ü–∏–π)
- ‚úÖ –•—É–∫–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ (9 —Ñ—É–Ω–∫—Ü–∏–π)

**–£–ª—É—á—à–µ–Ω–∏—è UX:**
- ‚ö° –ü–ª–∞–≤–Ω—ã–π –≤–≤–æ–¥ –±–µ–∑ –ª–∞–≥–æ–≤
- üíæ –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üìä –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞

**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~800 (–≤–∫–ª—é—á–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é)

---

**–§–∞–∑–∞ 4 –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** ‚úÖ

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É–¥–æ–±—Å—Ç–≤–∞:
- Debounce
- localStorage
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –ì–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–∏–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º

**–°–ª–µ–¥—É—é—â–∞—è —Ñ–∞–∑–∞:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è DashboardRu (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)
