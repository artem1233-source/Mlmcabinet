<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Auth Test - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background: #f0f0f0;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        #widget-container {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border: 2px dashed #ddd;
            border-radius: 8px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .log {
            background: #1e1e1e;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-entry {
            margin: 2px 0;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .step {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #39B7FF;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Telegram Login Widget - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h1>
        
        <div id="status-container">
            <div class="status info">
                ‚è≥ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...
            </div>
        </div>

        <h2>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h2>
        <div class="step">
            <strong>–ò–º—è –±–æ—Ç–∞:</strong> <code id="bot-name">h2enterbot</code><br>
            <strong>–î–æ–º–µ–Ω:</strong> <code id="domain">h2touch.pro</code><br>
            <strong>–¢–µ–∫—É—â–∏–π URL:</strong> <code id="current-url"></code>
        </div>

        <h2>üéØ Telegram Login Widget:</h2>
        <div id="widget-container">
            <div id="telegram-login-h2enterbot"></div>
        </div>

        <div id="widget-status" class="status">
            –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∂–µ—Ç–∞...
        </div>

        <h2>üìù –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π:</h2>
        <div id="log" class="log"></div>

        <h2>‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:</h2>
        <div class="step">
            <strong>1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram</strong><br>
            –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: <code>/mybots</code>
        </div>
        <div class="step">
            <strong>2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞</strong><br>
            –ù–∞–π–¥–∏—Ç–µ –≤ —Å–ø–∏—Å–∫–µ: <code>@h2enterbot</code>
        </div>
        <div class="step">
            <strong>3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω</strong><br>
            Bot Settings ‚Üí Domain ‚Üí –¥–æ–±–∞–≤—å—Ç–µ: <code>h2touch.pro</code>
        </div>
        <div class="step">
            <strong>4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É</strong><br>
            –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
        </div>
    </div>

    <script>
        // –õ–æ–≥ —Ñ—É–Ω–∫—Ü–∏—è
        const logContainer = document.getElementById('log');
        function log(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            const timestamp = new Date().toLocaleTimeString('ru-RU');
            const icon = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            entry.textContent = `[${timestamp}] ${icon} ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
            console.log(`[${type.toUpperCase()}]`, message);
        }

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—É—â–∏–π URL
        document.getElementById('current-url').textContent = window.location.href;
        log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞: ' + window.location.href);

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è callback
        window.onTelegramAuth = function(user) {
            log('‚úÖ –£–°–ü–ï–•! –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', 'success');
            log('ID: ' + user.id, 'success');
            log('–ò–º—è: ' + user.first_name, 'success');
            if (user.username) log('Username: @' + user.username, 'success');
            
            const statusContainer = document.getElementById('status-container');
            statusContainer.innerHTML = `
                <div class="status success">
                    <strong>‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!</strong><br>
                    ID: ${user.id}<br>
                    –ò–º—è: ${user.first_name}${user.last_name ? ' ' + user.last_name : ''}<br>
                    ${user.username ? 'Username: @' + user.username : ''}
                </div>
            `;
        };
        log('–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è onTelegramAuth —Å–æ–∑–¥–∞–Ω–∞');

        // –°–æ–∑–¥–∞—ë–º –≤–∏–¥–∂–µ—Ç
        log('–°–æ–∑–¥–∞–Ω–∏–µ Telegram Login Widget...');
        const container = document.getElementById('telegram-login-h2enterbot');
        
        if (container) {
            log('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–π–¥–µ–Ω');
            
            const script = document.createElement('script');
            script.src = 'https://telegram.org/js/telegram-widget.js?22';
            script.setAttribute('data-telegram-login', 'h2enterbot');
            script.setAttribute('data-size', 'large');
            script.setAttribute('data-radius', '10');
            script.setAttribute('data-request-access', 'write');
            script.setAttribute('data-onauth', 'onTelegramAuth');
            script.async = true;
            
            script.onload = function() {
                log('‚úÖ –°–∫—Ä–∏–ø—Ç telegram-widget.js –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã —Å–æ–∑–¥–∞–ª—Å—è –ª–∏ iframe
                setTimeout(function() {
                    const iframe = container.querySelector('iframe');
                    const widgetStatus = document.getElementById('widget-status');
                    
                    if (iframe) {
                        log('‚úÖ –í–∏–¥–∂–µ—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (iframe —Å–æ–∑–¥–∞–Ω)', 'success');
                        widgetStatus.className = 'status success';
                        widgetStatus.innerHTML = '<strong>‚úÖ –í–∏–¥–∂–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω!</strong><br>–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ @BotFather';
                    } else {
                        log('‚ùå –ü–†–û–ë–õ–ï–ú–ê: iframe –Ω–µ —Å–æ–∑–¥–∞–Ω! –í–∏–¥–∂–µ—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è', 'error');
                        widgetStatus.className = 'status error';
                        widgetStatus.innerHTML = `
                            <strong>‚ùå –í–∏–¥–∂–µ—Ç –ù–ï –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!</strong><br><br>
                            <strong>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</strong><br>
                            1. –ë–æ—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ @BotFather<br>
                            2. –î–æ–º–µ–Ω <code>h2touch.pro</code> –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞<br>
                            3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –±–æ—Ç–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <code>h2enterbot</code>)<br><br>
                            <strong>–†–µ—à–µ–Ω–∏–µ:</strong> –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∏–∂–µ ‚¨áÔ∏è
                        `;
                    }
                    
                    // –í—ã–≤–æ–¥–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
                    log('HTML –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: ' + container.innerHTML);
                }, 2000);
            };
            
            script.onerror = function() {
                log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ telegram-widget.js', 'error');
                const widgetStatus = document.getElementById('widget-status');
                widgetStatus.className = 'status error';
                widgetStatus.innerHTML = '<strong>‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç Telegram</strong>';
            };
            
            container.appendChild(script);
            log('–°–∫—Ä–∏–ø—Ç –≤–∏–¥–∂–µ—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω –≤ DOM');
            
            const statusContainer = document.getElementById('status-container');
            statusContainer.innerHTML = '<div class="status info">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–∂–µ—Ç–∞ Telegram...</div>';
        } else {
            log('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä #telegram-login-h2enterbot –Ω–µ –Ω–∞–π–¥–µ–Ω!', 'error');
        }
    </script>
</body>
</html>
