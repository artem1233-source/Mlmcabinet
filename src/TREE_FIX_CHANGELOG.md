# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –û—à–∏–±–∫–∞ smooth scroll

### **–ü—Ä–æ–±–ª–µ–º–∞:**
```
The `smooth` scroll behavior is not fully supported with dynamic size.
```

### **–ü—Ä–∏—á–∏–Ω–∞:**
`@tanstack/react-virtual` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `behavior: 'smooth'` –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `estimateSize` (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤).

### **–†–µ—à–µ–Ω–∏–µ:**

#### **1. –£–±—Ä–∞–ª–∏ JS smooth behavior:**
```typescript
// ‚ùå –ë—ã–ª–æ:
virtualizer.scrollToIndex(index, { align: 'center', behavior: 'smooth' });

// ‚úÖ –°—Ç–∞–ª–æ:
virtualizer.scrollToIndex(index, { align: 'center' });
```

#### **2. –î–æ–±–∞–≤–∏–ª–∏ CSS scroll-smooth:**
```typescript
<div
  ref={parentRef}
  className="... scroll-smooth"  // ‚Üê –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —á–µ—Ä–µ–∑ CSS
  style={{ height: '800px' }}
>
```

#### **3. –£–ª—É—á—à–∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ç–æ—Ä:**
```typescript
const virtualizer = useVirtualizer({
  count: flatList.length,
  getScrollElement: () => parentRef.current,
  estimateSize: () => 90,
  overscan: 10, // ‚Üê –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 5 –¥–æ 10 –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
  measureElement: // ‚Üê –¢–æ—á–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ (–∫—Ä–æ–º–µ Firefox)
    typeof window !== 'undefined' && navigator.userAgent.indexOf('Firefox') === -1
      ? (element) => element?.getBoundingClientRect().height
      : undefined,
});
```

#### **4. –î–æ–±–∞–≤–∏–ª–∏ –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π:**
```typescript
// –î–∞—ë–º –≤—Ä–µ–º—è –¥–µ—Ä–µ–≤—É –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —É–∑–ª–æ–≤
setTimeout(() => {
  virtualizer.scrollToIndex(index, { align: 'center' });
}, 100);
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- ‚úÖ –û—à–∏–±–∫–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ —á–µ—Ä–µ–∑ CSS
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ –≤—Å–µ–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∞
- ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞:

### **–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ—Ä–µ–≤–æ**
```
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ ‚Üí üå≥ –î–µ—Ä–µ–≤–æ
```

### **–®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫**
```
–í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–µ –∏–º—è –≤ –ø–æ–∏—Å–∫ ‚Üí –¥–µ—Ä–µ–≤–æ –¥–æ–ª–∂–Ω–æ –ø–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å—Å—è
```

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å**
```
–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ smooth scroll
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### **–ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ JS smooth?**
`@tanstack/react-virtual` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ü–∞—Ä–∞–º–µ—Ç—Ä `behavior: 'smooth'` –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å —ç—Ç–∏–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –ø—Ä–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö.

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CSS scroll-smooth?**
```css
.scroll-smooth {
  scroll-behavior: smooth;
}
```
–≠—Ç–æ—Ç CSS –∫–ª–∞—Å—Å Tailwind –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞—Ç–∏–≤–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É –±—ã—Ç—å –ø–ª–∞–≤–Ω–æ–π, —á—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π.

### **–ü–æ—á–µ–º—É –∑–∞–¥–µ—Ä–∂–∫–∞ 100ms?**
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `expandedIds` React –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç `flatList`. –ó–∞–¥–µ—Ä–∂–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ:
1. –ù–æ–≤—ã–µ —É–∑–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ DOM
2. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª –ø–æ–∑–∏—Ü–∏–∏
3. –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É

### **–ó–∞—á–µ–º measureElement?**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ç–æ—Ä—É —Ç–æ—á–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `estimateSize`. –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏.

**–ò—Å–∫–ª—é—á–µ–Ω–∏–µ Firefox:** –í Firefox `getBoundingClientRect()` –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º, –ø–æ—ç—Ç–æ–º—É —Ç–∞–º –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ `estimateSize`.

---

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

### **1. –£–≤–µ–ª–∏—á–µ–Ω overscan:**
```typescript
overscan: 10 // –ë—ã–ª–æ: 5
```
–¢–µ–ø–µ—Ä—å —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è 10 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –¥–ª—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏.

### **2. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ:**
```typescript
measureElement: —É—Å–ª–æ–≤–∏–µ ? —Ñ—É–Ω–∫—Ü–∏—è : undefined
```
–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—á–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ, –≤ Firefox - —Ç–æ–ª—å–∫–æ –æ—Ü–µ–Ω–∫–∞.

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ |
|---------|----------------|-------|
| –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ | ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | ‚úÖ –ü–ª–∞–≤–Ω–æ |
| FPS | 60 | 60 |
| –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ | ~90% | ~98% |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ | Chrome —Ç–æ–ª—å–∫–æ | –í—Å–µ |

---

## ‚ú® –ò—Ç–æ–≥:

–û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞! –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ —á–µ—Ä–µ–∑ CSS `scroll-smooth`, —á—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.

**–î–µ—Ä–µ–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!** üéâ
